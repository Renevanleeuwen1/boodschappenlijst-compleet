{"ast":null,"code":"// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nvar _AbstractPage_client;\nimport { __classPrivateFieldGet, __classPrivateFieldSet } from \"../internal/tslib.mjs\";\nimport { OpenAIError } from \"./error.mjs\";\nimport { defaultParseResponse } from \"../internal/parse.mjs\";\nimport { APIPromise } from \"./api-promise.mjs\";\nimport { maybeObj } from \"../internal/utils/values.mjs\";\nexport class AbstractPage {\n  constructor(client, response, body, options) {\n    _AbstractPage_client.set(this, void 0);\n    __classPrivateFieldSet(this, _AbstractPage_client, client, \"f\");\n    this.options = options;\n    this.response = response;\n    this.body = body;\n  }\n  hasNextPage() {\n    const items = this.getPaginatedItems();\n    if (!items.length) return false;\n    return this.nextPageRequestOptions() != null;\n  }\n  async getNextPage() {\n    const nextOptions = this.nextPageRequestOptions();\n    if (!nextOptions) {\n      throw new OpenAIError('No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.');\n    }\n    return await __classPrivateFieldGet(this, _AbstractPage_client, \"f\").requestAPIList(this.constructor, nextOptions);\n  }\n  async *iterPages() {\n    let page = this;\n    yield page;\n    while (page.hasNextPage()) {\n      page = await page.getNextPage();\n      yield page;\n    }\n  }\n  async *[(_AbstractPage_client = new WeakMap(), Symbol.asyncIterator)]() {\n    for await (const page of this.iterPages()) {\n      for (const item of page.getPaginatedItems()) {\n        yield item;\n      }\n    }\n  }\n}\n/**\r\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\r\n *\r\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\r\n *\r\n *    for await (const item of client.items.list()) {\r\n *      console.log(item)\r\n *    }\r\n */\nexport class PagePromise extends APIPromise {\n  constructor(client, request, Page) {\n    super(client, request, async (client, props) => new Page(client, props.response, await defaultParseResponse(client, props), props.options));\n  }\n  /**\r\n   * Allow auto-paginating iteration on an unawaited list call, eg:\r\n   *\r\n   *    for await (const item of client.items.list()) {\r\n   *      console.log(item)\r\n   *    }\r\n   */\n  async *[Symbol.asyncIterator]() {\n    const page = await this;\n    for await (const item of page) {\n      yield item;\n    }\n  }\n}\n/**\r\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\r\n */\nexport class Page extends AbstractPage {\n  constructor(client, response, body, options) {\n    super(client, response, body, options);\n    this.data = body.data || [];\n    this.object = body.object;\n  }\n  getPaginatedItems() {\n    return this.data ?? [];\n  }\n  nextPageRequestOptions() {\n    return null;\n  }\n}\nexport class CursorPage extends AbstractPage {\n  constructor(client, response, body, options) {\n    super(client, response, body, options);\n    this.data = body.data || [];\n    this.has_more = body.has_more || false;\n  }\n  getPaginatedItems() {\n    return this.data ?? [];\n  }\n  hasNextPage() {\n    if (this.has_more === false) {\n      return false;\n    }\n    return super.hasNextPage();\n  }\n  nextPageRequestOptions() {\n    const data = this.getPaginatedItems();\n    const id = data[data.length - 1]?.id;\n    if (!id) {\n      return null;\n    }\n    return {\n      ...this.options,\n      query: {\n        ...maybeObj(this.options.query),\n        after: id\n      }\n    };\n  }\n}","map":{"version":3,"names":["OpenAIError","defaultParseResponse","APIPromise","maybeObj","AbstractPage","constructor","client","response","body","options","_AbstractPage_client","set","__classPrivateFieldSet","hasNextPage","items","getPaginatedItems","length","nextPageRequestOptions","getNextPage","nextOptions","__classPrivateFieldGet","requestAPIList","iterPages","page","WeakMap","Symbol","asyncIterator","item","PagePromise","request","Page","props","data","object","CursorPage","has_more","id","query","after"],"sources":["C:\\boodschappenlijst\\boodschappenlijst-compleet\\node_modules\\openai\\src\\core\\pagination.ts"],"sourcesContent":["// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\r\n\r\nimport { OpenAIError } from './error';\r\nimport { FinalRequestOptions } from '../internal/request-options';\r\nimport { defaultParseResponse, WithRequestID } from '../internal/parse';\r\nimport { APIPromise } from './api-promise';\r\nimport { type OpenAI } from '../client';\r\nimport { type APIResponseProps } from '../internal/parse';\r\nimport { maybeObj } from '../internal/utils/values';\r\n\r\nexport type PageRequestOptions = Pick<FinalRequestOptions, 'query' | 'headers' | 'body' | 'path' | 'method'>;\r\n\r\nexport abstract class AbstractPage<Item> implements AsyncIterable<Item> {\r\n  #client: OpenAI;\r\n  protected options: FinalRequestOptions;\r\n\r\n  protected response: Response;\r\n  protected body: unknown;\r\n\r\n  constructor(client: OpenAI, response: Response, body: unknown, options: FinalRequestOptions) {\r\n    this.#client = client;\r\n    this.options = options;\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n\r\n  abstract nextPageRequestOptions(): PageRequestOptions | null;\r\n\r\n  abstract getPaginatedItems(): Item[];\r\n\r\n  hasNextPage(): boolean {\r\n    const items = this.getPaginatedItems();\r\n    if (!items.length) return false;\r\n    return this.nextPageRequestOptions() != null;\r\n  }\r\n\r\n  async getNextPage(): Promise<this> {\r\n    const nextOptions = this.nextPageRequestOptions();\r\n    if (!nextOptions) {\r\n      throw new OpenAIError(\r\n        'No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.',\r\n      );\r\n    }\r\n\r\n    return await this.#client.requestAPIList(this.constructor as any, nextOptions);\r\n  }\r\n\r\n  async *iterPages(): AsyncGenerator<this> {\r\n    let page: this = this;\r\n    yield page;\r\n    while (page.hasNextPage()) {\r\n      page = await page.getNextPage();\r\n      yield page;\r\n    }\r\n  }\r\n\r\n  async *[Symbol.asyncIterator](): AsyncGenerator<Item> {\r\n    for await (const page of this.iterPages()) {\r\n      for (const item of page.getPaginatedItems()) {\r\n        yield item;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\r\n *\r\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\r\n *\r\n *    for await (const item of client.items.list()) {\r\n *      console.log(item)\r\n *    }\r\n */\r\nexport class PagePromise<\r\n    PageClass extends AbstractPage<Item>,\r\n    Item = ReturnType<PageClass['getPaginatedItems']>[number],\r\n  >\r\n  extends APIPromise<PageClass>\r\n  implements AsyncIterable<Item>\r\n{\r\n  constructor(\r\n    client: OpenAI,\r\n    request: Promise<APIResponseProps>,\r\n    Page: new (...args: ConstructorParameters<typeof AbstractPage>) => PageClass,\r\n  ) {\r\n    super(\r\n      client,\r\n      request,\r\n      async (client, props) =>\r\n        new Page(\r\n          client,\r\n          props.response,\r\n          await defaultParseResponse(client, props),\r\n          props.options,\r\n        ) as WithRequestID<PageClass>,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Allow auto-paginating iteration on an unawaited list call, eg:\r\n   *\r\n   *    for await (const item of client.items.list()) {\r\n   *      console.log(item)\r\n   *    }\r\n   */\r\n  async *[Symbol.asyncIterator](): AsyncGenerator<Item> {\r\n    const page = await this;\r\n    for await (const item of page) {\r\n      yield item;\r\n    }\r\n  }\r\n}\r\n\r\nexport interface PageResponse<Item> {\r\n  data: Array<Item>;\r\n\r\n  object: string;\r\n}\r\n\r\n/**\r\n * Note: no pagination actually occurs yet, this is for forwards-compatibility.\r\n */\r\nexport class Page<Item> extends AbstractPage<Item> implements PageResponse<Item> {\r\n  data: Array<Item>;\r\n\r\n  object: string;\r\n\r\n  constructor(client: OpenAI, response: Response, body: PageResponse<Item>, options: FinalRequestOptions) {\r\n    super(client, response, body, options);\r\n\r\n    this.data = body.data || [];\r\n    this.object = body.object;\r\n  }\r\n\r\n  getPaginatedItems(): Item[] {\r\n    return this.data ?? [];\r\n  }\r\n\r\n  nextPageRequestOptions(): PageRequestOptions | null {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport interface CursorPageResponse<Item> {\r\n  data: Array<Item>;\r\n\r\n  has_more: boolean;\r\n}\r\n\r\nexport interface CursorPageParams {\r\n  after?: string;\r\n\r\n  limit?: number;\r\n}\r\n\r\nexport class CursorPage<Item extends { id: string }>\r\n  extends AbstractPage<Item>\r\n  implements CursorPageResponse<Item>\r\n{\r\n  data: Array<Item>;\r\n\r\n  has_more: boolean;\r\n\r\n  constructor(\r\n    client: OpenAI,\r\n    response: Response,\r\n    body: CursorPageResponse<Item>,\r\n    options: FinalRequestOptions,\r\n  ) {\r\n    super(client, response, body, options);\r\n\r\n    this.data = body.data || [];\r\n    this.has_more = body.has_more || false;\r\n  }\r\n\r\n  getPaginatedItems(): Item[] {\r\n    return this.data ?? [];\r\n  }\r\n\r\n  override hasNextPage(): boolean {\r\n    if (this.has_more === false) {\r\n      return false;\r\n    }\r\n\r\n    return super.hasNextPage();\r\n  }\r\n\r\n  nextPageRequestOptions(): PageRequestOptions | null {\r\n    const data = this.getPaginatedItems();\r\n    const id = data[data.length - 1]?.id;\r\n    if (!id) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      ...this.options,\r\n      query: {\r\n        ...maybeObj(this.options.query),\r\n        after: id,\r\n      },\r\n    };\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}